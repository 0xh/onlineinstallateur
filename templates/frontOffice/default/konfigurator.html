{extends file="layout.tpl"}

{* Body Class *}
{block name="body-class"}page-konfigurator{/block}

{* Breadcrumb *}
{block name='no-return-functions' append}
    {$breadcrumbs = [['title' => {intl l="Configurator" d="hookkonfigurator.fo.default"}, 'url'=>{url path="/konfigurator"}]]}
{/block}

{block name="main-content"}
    <div class="main">
            <!--h1 id="main-label" class="page-header">{intl l="Dein Angebot" d="hookkonfigurator.fo.default"}</h1-->

	<div class="container1">

		<div class="fs-form-wrap" id="fs-form-wrap">
			<div class="fs-title">
				<h1>IHR ANGEBOT</h1>
			</div>
              
          
        {hook name="konfigurator.top"}
            {form name="konfigurator.heizlast.berechnung"}
				<form id="form-konfigurator" class="form-horizontal fs-form fs-form-full " action="{url path="/konfigurator/suggestions"}" method="post" autocomplete="off">
                {form_field field='error_message'}
                	<input type="hidden" name="{$name}" value="{intl l="missing or invalid data"}" />
                {/form_field} 
                {form_hidden_fields}
                {if $form_error}<div class="alert alert-danger">{$form_error_message}</div>{/if}
                {hook name="konfigurator.form-top"}
					<ol class="fs-fields">
						<li>
							<h3>Brennstoff</h3>
                            <div><label class="fs-field-label fs-anim-upper" for="q1">Womit heizen Sie momentan?</label></div>
							<!--input class="fs-anim-lower" id="q1" name="q1" type="text" placeholder="Dean Moriarty" required/-->
                            <div class="fs-radio-group fs-radio-custom clearfix fs-anim-lower">
                            

							
                                {form_field field="brennstoff_momentan"} 
											<div class="fs-radio-group fs-radio-normal clearfix fs-anim-lower">
                                	{foreach $choices as $choice}
										<span><input id="{$label_attr.for}{$choice->value}" name="{$name}" type="radio" value="{$choice->value}"{if $value === {$choice->value}} checked{/if}><label for="{$label_attr.for}{$choice->value}" class="radio{$choice->value} fs-field-label-sm radiolabel">{$choice->label}</label></span>
								 	{/foreach}
									</div>
                                  		{/form_field}
							
							</div>
						</li>
                        
                        <li>
							<h3>Brennstoff</h3>
                            <div><label class="fs-field-label fs-anim-upper" for="q2">Womit werden Sie in Zukunft heizen?</label></div>
                            <div class="fs-radio-group fs-radio-custom clearfix fs-anim-lower">
								
                                
                             			{form_field field="brennstoff_zukunft"} 
											<div class="fs-radio-group fs-radio-normal clearfix fs-anim-lower">
                                	{foreach $choices as $choice}
										<span><input id="{$label_attr.for}{$choice->value}" name="{$name}" type="radio" value="{$choice->value}"{if $value === {$choice->value}} checked{/if}><label for="{$label_attr.for}{$choice->value}" class="radio{$choice->value} fs-field-label-sm radiolabel">{$choice->label}</label></span>
								 	{/foreach}
									</div>
                                  		{/form_field}
							</div>  
						</li>
                        
						<li>
                            <h3 class="fs-anim-upper">Gebäude und Bewohner</h3>
							<div class="row">
								<div class="col-md-6">
                            		<div> 
                           				<label class="fs-field-label-sm fs-anim-upper" for="q3" >Um was für ein Objekt handelt es sich?</label><br>
                                 
                           				{form_field field="gebaeudeart"} 
											<select name="{$name}" id="{$label_attr.for}{$choice->value}" class="fs-anim-lower">
                              					{foreach $choices as $choice}
                            						<option value="{$choice->value}"{if $value === {$choice->value}} checked{/if}>{$choice->label}</option>
							 					{/foreach}
                            				</select>
                                  		{/form_field}
                               		</div> 
									
									<div>
										<label class="fs-field-label-sm fs-anim-upper" for="q4" >Wie viele Personen leben in Ihrem Objekt?</label>
                          					<input class="fs-anim-lower" id="q4" name="q4" type="number" placeholder="3" step="1" min="1" style="width:20%"/>
                            		</div>
                            	</div>
                            	
                            	<div class="col-md-6">
                                	<div>
                            			<label class="fs-field-label-sm fs-anim-upper" for="q5" >Wann wurde das Objekt gebaut?</label>
                                		<br>
                            			{form_field field="baujahr"}
											<select name="{$name}" id="{$label_attr.for}{$choice->value}" class="fs-anim-lower">
                            				{foreach $choices as $choice}
                             					<option value="{$choice->value}"{if $value === {$choice->value}} checked{/if}>{$choice->label}</option>
                           					{/foreach}
                            				</select>
                            			{/form_field}
                                	</div>
                                	
                            		<div>
                                		<label class="fs-field-label-sm fs-anim-upper" for="q6">Wie groß ist die Heizfläche?</label>
                            			{form_field field="flaeche"}
                                    		<span class="help-block">{$message}</span>
                                    		<input type="text" style="width:30%;" placeholder="110" class="fs-anim-upper" name="{$name}" id="{$label_attr.for}" value="{$value}" class="form-control input-sm" maxlength="50" {$attr} {if $required}aria-required="true" required{/if}{if !$value || $error} autofocus{/if}>
											{if $error}
												{assign var="error_focus" value="true"}
											{elseif !$value}
												{assign var="error_focus" value="true"}
											{/if} 
                            			{/form_field}    
                            		</div>
                            	</div>
                            
							</div>
                            
						</li>
                        
                        
						<li>
                            <h3 class="fs-anim-upper">Aktueller Wärmeschutz</h3>
								<label class="fs-field-label-sm fs-anim-upper" for="q7" >Ist eine Wärmedämmung vorhanden?</label>
                            	{form_field field="waermedaemmung"}
									<div class="fs-radio-group fs-radio-normal clearfix fs-anim-lower">
                                	{foreach $choices as $choice}
                                		<span><input id="{$label_attr.for}{$choice->value}" name="{$name}" type="radio" value="{$choice->value}"{if $value === {$choice->value}} checked{/if}><label for="q7b" class="radio-conversion fs-field-label-sm">{$choice->label}</label></span>
                                	{/foreach}
                            		</div>
                            	{/form_field}
                                
                                <label class="fs-field-label-sm fs-anim-upper" for="q8" >Wie sind die Fenster verglast?</label>
                            	{form_field field="fenster"}
									<div class="fs-radio-group fs-radio-normal clearfix fs-anim-lower">
                                	{foreach $choices as $choice}
										<span><input id="{$label_attr.for}{$choice->value}" name="{$name}" type="radio" value="{$choice->value}"{if $value === {$choice->value}} checked{/if}><label for="q8b" class="radio-conversion fs-field-label-sm">{$choice->label}</label></span>
								 	{/foreach}
									</div>
                            	{/form_field}
                            
                            <label class="fs-field-label-sm fs-anim-upper" for="q9" >Wie groß sind Ihre Fensterflächen?</label>
                           	{form_field field="verglaste_flaeche"}
							<div class="fs-radio-group fs-radio-normal clearfix fs-anim-lower">
                                {foreach $choices as $choice}
									<span><input id="{$label_attr.for}{$choice->value}" name="{$name}" type="radio" value="{$choice->value}"{if $value === {$choice->value}} checked{/if}><label for="q9b" class="radio-conversion fs-field-label-sm">{$choice->label}</label></span>
								{/foreach}	
							</div>
                            {/form_field}
                            
                            <label class="fs-field-label-sm fs-anim-upper" for="q9" >Ist das Dach gedämmt?</label>
							<div class="fs-radio-group fs-radio-normal clearfix fs-anim-lower">
								<span><input id="q9b" name="q9" type="radio" value="conversion"/><label for="q9b" class="radio-conversion fs-field-label-sm">Ja</label></span>
								<span><input id="q9c" name="q9" type="radio" value="social"/><label for="q9c" class="radio-social fs-field-label-sm">Nein</label></span>
							</div> 
						</li>
                        
                        <li>
                            <h3 class="fs-anim-upper">LAGE</h3>
							<label class="fs-field-label-sm fs-anim-upper" for="q10" >Lage des Gebäudes?</label>
                            {form_field field="lage_des_gebaeudes"}
							<div class="fs-radio-group fs-radio-normal clearfix fs-anim-lower">
                                {foreach $choices as $choice}
                                	<span><input id="{$label_attr.for}{$choice->value}" name="{$name}" type="radio" value="{$choice->value}"{if $value === {$choice->value}} checked{/if}><label for="q10b" class="radio-conversion fs-field-label-sm">{$choice->label}</label></span>
                                {/foreach}
                            </div>
                            {/form_field}
                                
                            <label class="fs-field-label-sm fs-anim-upper" for="q11" >Windlage des Gebäudes?</label>
                            {form_field field="windlage_des_gebaudes"}
							<div class="fs-radio-group fs-radio-normal clearfix fs-anim-lower">
                                {foreach $choices as $choice}
									<span><input id="{$label_attr.for}{$choice->value}" name="{$name}" type="radio" value="{$choice->value}"{if $value === {$choice->value}} checked{/if}><label for="q11b" class="radio-conversion fs-field-label-sm">{$choice->label}</label></span>
								{/foreach}
							</div>
                            {/form_field}
                            
                            <label class="fs-field-label-sm fs-anim-upper" for="q12" >Lage der Räume?</label>
                           	{form_field field="lage_des_raumes"}
							<div class="fs-radio-group fs-radio-normal clearfix fs-anim-lower">
                                {foreach $choices as $choice}
								<span><input id="{$label_attr.for}{$choice->value}" name="{$name}" type="radio" value="{$choice->value}"{if $value === {$choice->value}} checked{/if}><label for="q11b" class="radio-conversion fs-field-label-sm">{$choice->label}</label></span>
								{/foreach}
							</div>
                            {/form_field}
                            
                            <label class="fs-field-label-sm fs-anim-upper" for="q12" >Wie viel ist die Anzahl der Außenwände</label>
                           {form_field field="anzahl_aussenwaende"}
							<div class="fs-radio-group fs-radio-normal clearfix fs-anim-lower">
                                {foreach $choices as $choice}
								<span><input id="{$label_attr.for}{$choice->value}" name="{$name}" type="radio" value="{$choice->value}"{if $value === {$choice->value}} checked{/if}><label for="q12b" class="radio-conversion fs-field-label-sm">{$choice->label}</label></span>
								 {/foreach}
							</div>
                            {/form_field} 
						</li>
                        
						<li>
							<h3 class="fs-anim-upper">Temperatur</h3>
							<label class="fs-field-label-sm fs-anim-upper" for="q13" >Wie hoch ist die Wohnraumtemperatur?</label>
                            {form_field field="wohnraumtemperatur"}
							<div class="fs-radio-group fs-radio-normal clearfix fs-anim-lower">
                                {foreach $choices as $choice}
								<span><input id="{$label_attr.for}{$choice->value}" name="{$name}" type="radio" value="{$choice->value}"{if $value === {$choice->value}} checked{/if}><label for="q13b" class="radio-conversion fs-field-label-sm">{$choice->label}</label></span>
								{/foreach}
							</div>
                            {/form_field}
                                
                            <label class="fs-field-label-sm fs-anim-upper" for="q14" >Wie hoch ist die Außentemperatur?</label>
							{form_field field="aussentemperatur"}
							<div class="fs-radio-group fs-radio-normal clearfix fs-anim-lower">
                                {foreach $choices as $choice}
									<span><input id="{$label_attr.for}{$choice->value}" name="{$name}" type="radio" value="{$choice->value}"{if $value === {$choice->value}} checked{/if}><label for="q14b" class="radio-conversion fs-field-label-sm">{$choice->label}</label></span>
								{/foreach}
							</div>
                            {/form_field}
						</li>
				
                       	<li>
							<label class="fs-field-label fs-anim-upper" for="q15">Anmerkungen zu Ihrer Heizung</label>
							<textarea class="fs-anim-lower" id="q15" name="q15" placeholder="Describe here"></textarea>
						</li>
						
					</ol><!-- /fs-fields -->
                  	
                  	<a href="/login"><button type="button" class="fs-submit"style="margin-bottom:20px">Individuelles Angebot</button></a>
					<button type="submit" class="fs-submit">Vorschlag sehen</button>

				</form><!-- /fs-form -->
                {/form}
			</div><!-- /fs-form-wrap -->
		</div><!-- /container -->
            
            
            
		<section id="products-new">	
			<div class="products-heading">  
            	<div id="waermebedarf"></div>        
			</div>
			<div id="category-products">
            </div><!-- /#category-products -->
		</section><!-- #products-heizung -->	
		
		<div id="product_suggestion">
			<ul id="products"></ul>
		</div>
    </div><!-- /.layout -->
{/block}

{block name="stylesheet"}
	{hook name="register.stylesheet"}
{/block}


{block name="after-javascript-include"}
 <script src="{javascript file='assets/dist/js/vendors/classie.js'}"></script>
 <script src="{javascript file='assets/dist/js/vendors/selectFx.js'}"></script>
 <script src="{javascript file='assets/dist/js/vendors/fullscreenForm.js'}"></script>
 
<script>
$('body').on('submit', '.form-horizontal', function (e) {
	e.preventDefault();
	$.ajax({
		type: $(this).attr('method'),
		url: $(this).attr('action'),
		data: $(this).serialize()
	})
	.done(function (data, textStatus, request) {
		$waermebedarf = request.getResponseHeader('waermebedarf');
		if($waermebedarf != null) 
			$('#waermebedarf').text("Wärmebedarf ist: "+$waermebedarf+"KW");
	   
		$("#category-products").empty().append(data);
	})
	.fail(function (jqXHR, textStatus, errorThrown) {
		if (typeof jqXHR.responseJSON !== 'undefined') {
			if (jqXHR.responseJSON.hasOwnProperty('form')) {
				$('#form_body').html(jqXHR.responseJSON.form);
			}
			$('.form_error').html(jqXHR.responseJSON.message);
		} else {
			alert(errorThrown);
		}
	});
});
(function() {
	var formWrap = document.getElementById( 'fs-form-wrap' );

	[].slice.call( document.querySelectorAll( 'select.cs-select' ) ).forEach( function(el) {	
		new SelectFx( el, {
			stickyPlaceholder: false,
			onChange: function(val){
				document.querySelector('span.cs-placeholder').style.backgroundColor = val;
			}
		});
	});

	new FForm( formWrap, {
		onReview : function() {
			//classie.add( document.body, 'overview' ); // for demo purposes only
		}
	} );
})();
</script>

{hook name="register.after-javascript-include"}
{/block}

{block name="javascript-initialization"}
{hook name="register.javascript-initialization"}
{/block}