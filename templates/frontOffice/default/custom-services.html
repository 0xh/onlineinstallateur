{extends file="layout.tpl"}

{* Body Class *}
{block name="body-class"}page-konfigurator{/block}

{* Breadcrumb *}
{block name='no-return-functions' append}
    {$breadcrumbs = [['title' => {intl l="Individuelle Services" d="hookkonfigurator.fo.default"}, 'url'=>{url path="/Individuelle Services"}]]}
{/block}

{block name="main-content"}
    <div class="main">
            <!--h1 id="main-label" class="page-header">{intl l="Dein Angebot" d="hookkonfigurator.fo.default"}</h1-->

	<div class="container1">

		<div class="fs-form-wrap" id="fs-form-wrap" style="height:700px">
			<div class="fs-title">
				<h1>Individuelle Services</h1>
			</div>
              

            {form name="custom.services"}
				<form id="form-konfigurator" class="form-horizontal fs-form fs-form-full " action="{url path="/custom-services/sendmail"}" method="post" autocomplete="off">
                {form_field field='error_message'}
                	<input type="hidden" name="{$name}" value="{intl l="missing or invalid data"}" />
                {/form_field} 
                {form_hidden_fields}
                {if $form_error}<div class="alert alert-danger">{$form_error_message}</div>{/if}
                
					<ol class="fs-fields">

                        
						<li>
                            <h3 class="fs-anim-upper">Schritt 1</h3>
							<div class="row">

                                    <div>
                           				<label class="fs-field-label-sm fs-anim-upper" for="q3">Welche Art von Projekt haben Sie?</label><br>
                                        {form_field field="projekt-art"}
                                         
											<select class="fs-anim-lower" name="projekt-art" id="projekt-art">
                                               	{foreach $choices as $choice}
                            						<option value="{$choice->value}"{if $value === {$choice->value}} checked{/if}>{$choice->label}</option>
							 					{/foreach}
                            				</select>
                                        {/form_field}
                                </div>
                                <div id="marke" style="display:none;">
                                <label class="fs-field-label-sm fs-anim-upper" for="q3">Welche Marke und / oder Modell?</label>
                                {form_field field="arbeit-art"}
                                <input type="text">
                                {/form_field} 
                                </div>
                                
                                <div id="oel-gas" style="display:none;">
                                <label class="fs-field-label-sm fs-anim-upper" for="q7" >Ist Ihr System von Öl oder Gas?</label>
                            	{form_field field="oel-gas"}
									<div class="fs-radio-group fs-radio-normal clearfix fs-anim-lower">
                                {foreach $choices as $choice}
                                	<span><input id="{$label_attr.for}{$choice->value}" name="{$name}" type="radio" value="{$choice->value}"{if $value === {$choice->value}} checked{/if}><label for="q10b" class="radio-conversion fs-field-label-sm">{$choice->label}</label></span>
                                {/foreach}
                                    </div>
                            	{/form_field}
                            
							    </div>

                            	
                            	<div>
                            			<label class="fs-field-label-sm fs-anim-upper" for="q5" >Welche Art von Arbeit brauchen Sie?</label>
                                		<br>
                            		      {form_field field="arbeit-art"}
                                         
											<select class="fs-anim-lower">
                                               	{foreach $choices as $choice}
                            						<option value="{$choice->value}"{if $value === {$choice->value}} checked{/if}>{$choice->label}</option>
							 					{/foreach}
                            				</select>
                                        {/form_field}
                            	</div>
                                <br>
                                <div>
                                <label class="fs-field-label-sm fs-anim-upper" for="q7" >Ist Ihr Gerät gut zugänglich?</label>
                            	{form_field field="zugaenglichkeit"}
									<div class="fs-radio-group fs-radio-normal clearfix fs-anim-lower">
                                {foreach $choices as $choice}
                                	<span><input id="{$label_attr.for}{$choice->value}" name="{$name}" type="radio" value="{$choice->value}"{if $value === {$choice->value}} checked{/if}><label for="q10b" class="radio-conversion fs-field-label-sm">{$choice->label}</label></span>
                                {/foreach}
                                    </div>
                            	{/form_field}
                            
							    </div>
                                <div>
                            			<label class="fs-field-label-sm fs-anim-upper" for="q5" >Wann benötigen Sie den Service?</label>
                                <div>
                            			{form_field field="zeit"}
											<select class="fs-anim-lower">
                                               	{foreach $choices as $choice}
                            						<option value="{$choice->value}"{if $value === {$choice->value}} checked{/if}>{$choice->label}</option>
							 					{/foreach}
                            				</select>
	

                            			{/form_field}
                                </div>
                            	</div>
                        </div>
						</li>
                        
                        
						<li>
                        <h3 class="fs-anim-upper">Schritt 2</h3>
                            <div>
							<label class="fs-field-label fs-anim-upper" for="q15">Bitte beschreiben Sie Ihr Projekt </label>
							<textarea class="fs-anim-lower" id="q15" name="q15" placeholder="Describe here"></textarea>
                            </div>
                            <div class="fs-anim-upper">
                              <input type="file" name="img">  
                            </div>
						</li>
                            
				
                      
						
					</ol><!-- /fs-fields -->
                  	 <div class="fs-submit" style="width:500px">
                          <h3 class="fs-anim-upper">Was kommt als nächstes?</h3>
                         Nachdem Sie Ihre Anfrage einreichen, Service-Profis wird es Ihnen ihre Schätzungen innerhalb von 1 Werktag überprüfen und eine E-Mail. Wählen Sie dann das Pro und schätzen Sie es vorziehen, und den Service planen.<br></div>

					<button type="submit" class="fs-submit">Angebot sichern</button>

				</form><!-- /fs-form -->
                {/form}
			</div><!-- /fs-form-wrap -->
		</div><!-- /container -->
            
            
            
		<section id="products-new">	
			<div class="products-heading">  
            	<div id="waermebedarf"></div>        
			</div>
			<div id="category-products">
            </div><!-- /#category-products -->
		</section><!-- #products-heizung -->	
		
		<div id="product_suggestion">
			<ul id="products"></ul>
		</div>
    </div><!-- /.layout -->
{/block}

{block name="stylesheet"}
	{hook name="register.stylesheet"}
{/block}


{block name="after-javascript-include"}
 <script src="{javascript file='assets/dist/js/vendors/classie.js'}"></script>
 <script src="{javascript file='assets/dist/js/vendors/selectFx.js'}"></script>
 <script src="{javascript file='assets/dist/js/vendors/fullscreenForm.js'}"></script>
 
<script>
    
    $( "#projekt-art" ).change(function() {
    var selection = $(this).val();
    switch(selection){
    case "2":
    case "3":
    case "4":
    $("#marke").show()
    break;
    default:
    $("#marke").hide() 
    
    break;
    case "3":
    $("#oel-gas").show()     



    }
});
    
$('body').on('submit', '.form-horizontal', function (e) {
	e.preventDefault();
	$.ajax({
		type: $(this).attr('method'),
		url: $(this).attr('action'),
		data: $(this).serialize()
	})
	.done(function (data, textStatus, request) {
		$waermebedarf = request.getResponseHeader('waermebedarf');
		if($waermebedarf != null) 
			$('#waermebedarf').text("Ihre Anftage ist gesendet");
	   
		$("#category-products").empty().append(data);
	})
	.fail(function (jqXHR, textStatus, errorThrown) {
		if (typeof jqXHR.responseJSON !== 'undefined') {
			if (jqXHR.responseJSON.hasOwnProperty('form')) {
				$('#form_body').html(jqXHR.responseJSON.form);
			}
			$('.form_error').html(jqXHR.responseJSON.message);
		} else {
			alert(errorThrown);
		}
	});
});
(function() {
	var formWrap = document.getElementById( 'fs-form-wrap' );

	[].slice.call( document.querySelectorAll( 'select.cs-select' ) ).forEach( function(el) {	
		new SelectFx( el, {
			stickyPlaceholder: false,
			onChange: function(val){
				document.querySelector('span.cs-placeholder').style.backgroundColor = val;
			}
		});
	});

	new FForm( formWrap, {
		onReview : function() {
			//classie.add( document.body, 'overview' ); // for demo purposes only
		}
	} );
})();
</script>

{hook name="register.after-javascript-include"}
{/block}

{block name="javascript-initialization"}
{hook name="register.javascript-initialization"}
{/block}