{extends file="admin-layout.tpl"}

{block name="no-return-functions"}
{$admin_current_location = 'Revenue Orders'}
{/block}

{block name="page-title"}{intl l='Revenue Orders'}{/block}

{block name="main-content"} 
{render action='RevenueDashboard\Controller\Admin\WholesalePartnerContactController::blockJs'}
{assign page {$smarty.get.page|default:1}}

<div class="general-block-decorator dashboard">
    <ul class="breadcrumb">
        <li><a href="{url path='/admin/modules'}">{intl l="Modules"}</a></li>
        <li><a href="{url path='/admin/module/revenue-products'}">{intl l="Revenue Products"}</a></li>
        <li><a href="{url path='/admin/module/revenue-orders'}">{intl l="Revenue Orders"}</a></li>
        <li><a href="{url path='/admin/module/revenue-wholesale-partner'}">{intl l="Partner"}</a></li>
        <li><a href="{url path='/admin/module/revenue-wholesale-partner-contact'}">{intl l="Partner Contact"}</a></li>
        <li><a href="{url path='/admin/module/revenue-wholesale-partner-product'}">{intl l="Partner Product"}</a></li>
    </ul>

    <form action="{url path='/admin/module/revenue-orders'}" method="get">
        <div class="row" style="padding-bottom: 10px;">
            <div class="col-sm-2">
                <h5>{intl l="Start date:"}</h5>
                <input type="text" id="datepickerStartDate" name="datepickerStartDate" class="form-control" value="{trim($smarty.get.datepickerStartDate)}">
            </div>
            <div class="col-sm-2">
                <h5>{intl l="End date:"}</h5>
                <input type="text" id="datepickerEndDate" name="datepickerEndDate" class="form-control" value="{trim($smarty.get.datepickerEndDate)}">
            </div>
            <div class="col-sm-2">
                <h5>{intl l="Search:"}</h5>
                <button type="submit" id="get_update_orders" class="btn btn-info form-control">Search</button>
            </div>
        </div>
    </form>
    
    <table class="table table-striped">
        <tr style="font-weight: bold; font-size: 15px;">
            <td>No.</td>
            <td>Order id</td>
            <td>Delivery cost</td>
            <td>Delivery method</td>
            <td>Payment processor cost</td>
            <td>Price</td>
            <td>Revenue</td>
        </tr>
        {assign var="total" value="0"}
        {assign var="nr" value="1"}
        {loop name="revenue.orders.loop" type="revenue.orders.loop" page={$page} limit=100}
        {$total = $total + $revenue}
        <tr>
            <td>{$nr++}.</td>
            <td><a href="{url path='/admin/order/update/'}{$order_id}">{$order_id}</a></td>
            <td>{$delivery_cost}</td>
            <td>{$delivery_method}</td>
            <td>{$payment_processor_cost}</td>
            <td>{$price}</td>
            <td>{$revenue}</td>
        </tr>
        {/loop}
        <tr>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td><b>Total: </b></td>
            <td><b style="color: blue;">{$total|number_format:2:".":","}</b></td>
        </tr>
    </table>

    <tfoot>
        <tr>
            <td colspan="100">
                {include
                file = "includes/pagination.html"
                loop_ref       = "revenue.orders.loop"
                max_page_count = 100
                page_url       = {url path="/admin/module/revenue-orders" }
                }
            </td>
        </tr>
    </tfoot>
</div>
{/block}