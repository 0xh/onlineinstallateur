{extends file="admin-layout.tpl"}

{block name="no-return-functions"}
    {$admin_current_location = 'modules'}
{/block}

{block name="page-title"}{intl l='Filter configurator list'}{/block}

{block name="check-resource"}admin.module{/block}
{block name="check-access"}view{/block}

{block name="main-content"}
{assign order_tab {$tab|default:$smarty.get.tab|default:"general"}}

<div class="configurator">

    <div id="wrapper" class="container">
		<script type="text/javascript" src="{javascript file='assets/js/jquery-1.11.3.min.js'}"></script>
		<script type="text/javascript" src="{javascript file='assets/js/fastselect.js'}"></script>
	    <link rel="stylesheet" href="{stylesheet file='assets/css/fastselect.min.css'}">
		 
        <ul class="breadcrumb">
            <li><a href="{url path='/admin/home'}">{intl l="Home"}</a></li>
            <li><a href="{url path='/admin/modules'}">{intl l="Modules"}</a></li>
            <li>{intl l="Filter configurator" d=""}</li>
        </ul>
      
		<div class="row">
            <div class="col-md-12">
               <form method="GET" action="{url path='/admin/modules/filter-configurator-features/save'}" class="clearfix" id='fiter-configurator'>
	                <div class="general-block-decorator">
                        <div class="table-responsive">
    	                    <table class="table table-striped table-condensed table-left-aligned">
    	                        <caption>
    	                           {intl l='Filter configurator'}

                                    {loop type="auth" name="can_create" role="ADMIN" resource="admin.configuration.feature" access="CREATE"}
                                    <a class="btn btn-primary action-btn" title="{intl l='Add a new filter configurator'}" href="{url path='/admin/modules/filter-configurator/create'}"  data-toggle="modal">
                                        <span class="glyphicon glyphicon-plus-sign"></span>
                                    </a>
                                    {/loop}
    	                        </caption>
                                <thead>
                                    <tr>
                                        <th>{intl l='ID'} </th>

                                        <th>{intl l='Title'} </th>

                                        <th class="text-center">{intl l="Position"} </th>

                                        <th class="actions">{intl l="Actions"}</th>
                                    </tr>
                                </thead>

                                <tbody> 
                                	{loop type="product_filter_configuration" name="product_filter_configuration" locale="$locale"}
	                                	<tr>  
	                                		<div class="row">                          				
	                                			<td class="text-left col-md-1">{$CONFIGURATOR_ID}</td>
												<td class="text-left col-md-9"><a href="{url path='/admin/modules/filter-configurator/update/%id' id=$CONFIGURATOR_ID}">{$TITLE}</a></td>
												<td class="text-center col-md-1">{$POSITION}</td>
												<td class="text-right col-md-1 actions">
													<div class="btn-toolbar btn toolbar-primary">
		                                                <span class="glyphicon glyphicon-cog"></span>
		                                            </div>
		                                            <div class="toolbar-options hidden">
		    	                                        {loop type="auth" name="can_change" role="ADMIN" resource="admin.configuration.feature" access="UPDATE"}
		    	                                            <a class="feature-change" title="{intl l='Change this product feature'}" href="{url path='/admin/modules/filter-configurator/update/%id' id=$CONFIGURATOR_ID}"><span class="glyphicon glyphicon-edit"></span></a>
		    	                                        {/loop}
		
		    	                                        {loop type="auth" name="can_change" role="ADMIN" resource="admin.configuration.feature" access="DELETE"}
		    	                                            <a class="feature-delete" title="{intl l='Delete this filter configurator'}" href="{url path='/admin/modules/filter-configurator/delete/%id' id=$CONFIGURATOR_ID}"><span class="glyphicon glyphicon-trash"></span></a>
		    	                                        {/loop}
		                                            </div>
												</td>
											</div>
										</tr>
										<tr> 
								           <div class="row">  	
	                                			<td colspan='4'> 
										            <select class="multipleSelect" multiple="" name="{$CONFIGURATOR_ID}[]" data-attr="">
										            	{loop name="list" type="feature" backend_context="1" lang=$lang_id}
										            		{loop name="configurator_filter_relation" type="configurator_filter_relation" feature_id={$ID} configurator_id={$CONFIGURATOR_ID}}
											            		<option value="{$ID}" {if $RELATION} selected="selected"{/if}><span data-select="{$CONFIGURATOR_ID}[]">{$TITLE}</span></option>
											                {/loop}
											             {/loop}
											        </select>
								            	</td>
								        		<script>
										            (function($){
										            	$('.multipleSelect').fastselect();
										            })(jQuery); 
								     			</script>
								     		</div>
	                                	</tr>
                                	{/loop}
                                </tbody>
                        	</table>
                        </div>
	                </div>
	               
                </form>
                <div class="text-right">
                	<button type="submit" form="fiter-configurator" value="Submit" class="btn btn-primary">{intl l="Save filters" d=""}</button>
                </div>
            </div>
        </div>
    </div>
</div>
{/block}


